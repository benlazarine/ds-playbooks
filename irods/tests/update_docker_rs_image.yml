---
- name: test build image
  hosts: localhost
  tasks:
    - include_tasks: tasks/test_include_group_vars.yml
      vars:
        group: "{{ item.group }}"
        expected_value: "{{ item.expected_value }}"
      with_items:
        - group: extensionless_file
          expected_value: no extension
        - group: json_file
          expected_value: json
        - group: yaml_file
          expected_value: yaml
        - group: yml_file
          expected_value: yml

    - name: test include group vars from extensionless directory
      debug:
        msg: TODO implement

    - name: test include group vars from json directory
      debug:
        msg: TODO implement

    - name: test include group vars from yaml directory
      debug:
        msg: TODO implement

    - name: test include group vars from yml directory
      debug:
        msg: TODO implement

    - debug:
        msg: TODO test build_plugins.yml

    - name: test create command scripts staging directory
      debug:
        msg: TODO implement

    - name: test add common command scripts
      debug:
        msg: TODO implement

    - debug:
        msg: TODO import cyverse.irods-cfg

    - name: test stage dynamic rule bases
      debug:
        msg: TODO implement

    - name: test stage static rule bases
      debug:
        msg: TODO implement

    - name: test copy .dockerignore
      debug:
        msg: TODO implement

    - name: test copy resource server docker scripts
      debug:
        msg: TODO implement
