---
- name: test configure AMQP broker
  hosts: rabbitmq
  become: true
  tasks:
    - name: test vhost name is correct
      debug:
        msg: TODO implemnt

    - name: test vhost users are correct
      debug:
        msg: TODO implemnt


- name: test install pika
  hosts: localhost
  gather_facts: false
  run_once: true
  tasks:
    - debug:
        msg: TODO implement


- import_playbook: provision.yml
- import_playbook: cfg_irods.yml


- name: test start iRODS on IES
  hosts: localhost
  gather_facts: false
  run_once: true
  tasks:
    - debug:
        msg: TODO implement


- name: test start iRODS on resource servers
  hosts: localhost
  gather_facts: false
  run_once: true
  tasks:
    - debug:
        msg: TODO implement


- name: test run-time initialization
  hosts: localhost
  gather_facts: false
  run_once: true
  tasks:
    - debug:
        msg: TODO implement


- import_playbook: de_usage.yml
